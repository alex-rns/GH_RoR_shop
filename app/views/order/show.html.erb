<h2 class="text-center mt-5">Cart</h2>
<% if @items.empty? %>
  <h4>Cart is empty</h4>
<% else %>
  <div id="cart">
    <% @items.each do |item| %>
      <div class="container order-item order-item-<%= item.id %> py-4 px-3 m-4">
        <p class="text-center fs-4"><%= link_to item.product.name, product_path(item.product_id) %></p>

        <div class="d-flex">
          <div>
            <%= image_tag item.product.image if item.product.image.present? %>
          </div>
          <p class="pl-3">Description: <%= item.product.description %></p>
        </div>
        <div class="d-flex align-items-center py-3">
          <strong class="px-2">Price: <%= number_to_currency(item.product.price, unit: "UAH", separator: ",", delimiter: " ", format: "%n %u") %></strong>
          <div class="d-flex align-items-center">
            <strong class="px-2">Quantity:</strong>
            <div class="btn-group">
              <%= link_to "-", decrease_quantity_order_item_path(item), class: "btn btn-success d-flex align-items-center btn-sm #{"disabled" if item.quantity == 1}" %>
              <strong class="p-2 bg-success text-white"><%= item.quantity %></strong>
              <%= link_to "+", increase_quantity_order_item_path(item), class: "btn btn-success d-flex align-items-center btn-sm" %>
            </div>
          </div>
        </div>
        <p class="px-2 fw-bold">Price with
          quantity: <%= number_to_currency(item.total_items_price, unit: "UAH", separator: ",", delimiter: " ", format: "%n %u") %></p>
        <%= link_to "Delete product from cart", product_order_item_path(item.product, item), method: :delete, remote: true, class: "btn btn-danger" %>
      </div>
    <% end %>
  </div>



  <div class="container total-price px-4">
    <h4>Total order price: <%= number_to_currency(@items.map { |a| a.total_items_price }.sum, unit: "UAH", separator: ",", delimiter: " ", format: "%n %u") %></h4>
    <%= link_to "Confirm order", page_path(page: 'confirm_cart'), class: "btn btn-outline-success btn-lg" %>
  </div>

<% end %>